{"version":3,"sources":["spinner/spinner.js","App.jsx","serviceWorker.js","index.js"],"names":["Spinner","className","moment","locale","week","dow","doy","localizer","momentLocalizer","cal","require","ical","domain","name","prodId","company","product","filedownloadlink","Event","event","url","modcode","staff","x","length","push","href","type","moduleName","room","App","props","minTime","Date","setHours","maxTime","state","loading","events","modules","this","matric","undefined","window","open","location","origin","pathname","e","key","console","log","openUrl","setState","components","agenda","id","download","calendar","startAccessor","endAccessor","style","display","height","defaultView","min","max","formats","agendaHeaderFormat","start","end","utc","format","onChange","_HandleChange","target","value","onKeyDown","evnt","_HandleInput","table","data","rows","headers","i","cells","innerHTML","toLowerCase","replace","tableRow","rowData","j","days","addMinutes","parseWeeks","parseTime","addDays","date","result","setDate","getDate","time","split","returnArray","parseInt","trim","weeks","includes","test","minutes","getTime","week1","week12","moduleDict","dayAdd","y","cur","activity","getModuleInfo","weeksForEvent","weeksSplit","z","concat","curDate","startHours","endHours","staffsplit","shift","staffarray","title","allDay","duration","icalevent","summary","description","createEvent","toURL","xmlHttp","XMLHttpRequest","send","responseText","slash","fullURL","cors","raw","daysJSON","parser","DOMParser","doc","parseFromString","tableToJson","body","firstChild","params","URLSearchParams","search","get","createURLFromMatric","onload","status","alert","rawHtmlToJSON","then","parseTimetable","f","Component","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"kYAEe,SAASA,IACpB,OACI,yBAAKC,UAAU,gBAAe,8BAAW,8BAAW,8BAAW,+BCEvEC,IAAOC,OAAO,KAAM,CAClBC,KAAM,CACJC,IAAK,EACLC,IAAK,KAGT,IAAMC,EAAYC,YAAgBN,KAI5BO,EADOC,EAAQ,GACTC,CAAK,CAAEC,OAAQ,uCAAwCC,KAAM,gBAAiBC,OAAQ,CAAEC,QAAS,yBAA0BC,QAAS,mBAC5IC,GAAmB,EAEvB,SAASC,EAAT,GAGE,IAHyB,IAAVC,EAAS,EAATA,MACXC,EAAM,mCAAqCD,EAAME,QACjDC,EAAQ,GACHC,EAAI,EAAGA,EAAIJ,EAAMG,MAAME,OAAQD,IACtCD,EAAMG,KAAK,uBAAGC,KAAMP,EAAMG,MAAMC,GAAGH,KAAxB,IAA+BD,EAAMG,MAAMC,GAAGV,KAA9C,MAGb,OACE,yBAAKZ,UAAU,iBACb,yBAAKA,UAAU,cACZkB,EAAMQ,MAET,yBAAK1B,UAAU,gBACb,uBAAGyB,KAAMN,GAAMD,EAAME,QAArB,IAA+BF,EAAMS,aAEvC,yBAAK3B,UAAU,cACG,WAAfkB,EAAMU,KAAoB,MAAQV,EAAMU,MAE3C,yBAAK5B,UAAU,eACZqB,I,IAMYQ,E,kDACnB,WAAYC,GAAQ,IAAD,sBACjB,cAAMA,GACN,IAAMC,EAAU,IAAIC,KACpBD,EAAQE,SAAS,EAAG,EAAG,GACvB,IAAMC,EAAU,IAAIF,KAJH,OAKjBE,EAAQD,SAAS,GAAI,EAAG,GACxB,EAAKE,MAAQ,CACXJ,QAASA,EACTG,QAASA,EACTE,SAAS,EACTC,OAAQ,GACRC,QAAS,IAXM,E,sDAiBjB,GAA0B,KAAtBC,KAAKJ,MAAMK,aAAuCC,IAAtBF,KAAKJ,MAAMK,QAA8C,OAAtBD,KAAKJ,MAAMK,OAC5E,OAAO,EAGTE,OAAOC,KAAKD,OAAOE,SAASC,OAASH,OAAOE,SAASE,SAAW,OAASP,KAAKJ,MAAMK,OAAQ,W,mCAEjFO,GACG,UAAVA,EAAEC,MACJC,QAAQC,IAAI,OACZX,KAAKY,a,oCAGKJ,GACZE,QAAQC,IAAIH,GACZR,KAAKa,SAAS,CAAEZ,OAAQO,M,+BAGhB,IAAD,OACHM,EAAa,CACfC,OAAQ,CACNpC,MAAOD,IAGX,OACE,yBAAKsC,GAAG,aACLvC,GAAoB,uBAAGhB,UAAU,UAAUwD,SAAS,UAAU/B,KAAMT,GAAhD,iBACpBuB,KAAKJ,MAAMC,SAAW,kBAACrC,EAAD,MAEvB,kBAAC,IAAD,CACEsD,WAAYA,EACZ/C,UAAWA,EACX+B,OAA+B,MAAvBE,KAAKJ,MAAMsB,SAAmB,GAAKlB,KAAKJ,MAAMsB,SACtDC,cAAc,QACdC,YAAY,MACZC,MAA8B,MAAvBrB,KAAKJ,MAAMsB,SAAmB,CAAEI,QAAS,QAAW,CAAEC,OAAQ,KACrEC,YAAa,SACbC,IAAKzB,KAAKJ,MAAMJ,QAChBkC,IAAK1B,KAAKJ,MAAMD,QAChBgC,QAAS,CACPC,mBAAoB,YAAqB,IAAlBC,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,IAC5B,OAAQpE,IAAOqE,IAAIF,GAAOG,OAAO,cAAgB,MAAQtE,IAAOqE,IAAID,GAAKE,OAAO,kBAI7D,MAAvBhC,KAAKJ,MAAMsB,WAAqBlB,KAAKJ,MAAMC,SAC3C,yBAAKpC,UAAU,gBACb,8BACE,+DACA,yBAAKuD,GAAG,mBACN,2BAAOiB,SAAU,SAAAtD,GAAK,OAAI,EAAKuD,cAAcvD,EAAMwD,OAAOC,QACxDC,UAAW,SAAAC,GAAI,OAAI,EAAKC,aAAaD,IACrCjE,KAAK,kBAEP,4BAAQ2C,GAAG,QAAQ3C,KAAK,SACtB,4BAAQ+D,MAAO,GAAf,MAGA,4BAAQA,MAAO,GAAf,QAKJ,4BAAQjD,KAAK,UAAb,W,kCAWAqD,GACV,IAAIC,EAAO,GACX,QAAqBvC,GAAjBsC,EAAME,KAAK,GACb,MAAO,GAIT,IADA,IAAIC,EAAU,GACLC,EAAI,EAAGA,EAAIJ,EAAME,KAAK,GAAGG,MAAM7D,OAAQ4D,IAC9CD,EAAQC,GAAKJ,EAAME,KAAK,GAAGG,MAAMD,GAAGE,UAAUC,cAAcC,QAAQ,MAAO,IAI7E,IAAK,IAAIJ,EAAI,EAAGA,EAAIJ,EAAME,KAAK1D,OAAQ4D,IAAK,CAK1C,IAHA,IAAIK,EAAWT,EAAME,KAAKE,GACtBM,EAAU,GAELC,EAAI,EAAGA,EAAIF,EAASJ,MAAM7D,OAAQmE,IAEzCD,EAAQP,EAAQQ,IAAMF,EAASJ,MAAMM,GAAGL,UAI1CL,EAAKxD,KAAKiE,GAEZ,OAAOT,I,8EAGYW,G,MAEVC,EAGAC,EAcAC,EAOAC,E,sHAAAA,E,SAAQC,EAAML,GACrB,IAAIM,EAAS,IAAIjE,KAAKgE,GAEtB,OADAC,EAAOC,QAAQD,EAAOE,UAAYR,GAC3BM,GAVAH,E,SAAUM,GACjB,IAAIC,EAAQD,EAAKC,MAAM,KACnBC,EAAc,GAGlB,OAFAA,EAAY9E,KAAK+E,SAASF,EAAM,GAAGG,SACnCF,EAAY9E,KAAK+E,SAASF,EAAM,GAAGG,SAC5BF,GAnBAT,E,SAAWY,GAClB,GAAIA,EAAMC,SAAS,KAAM,CAGvB,IAFA,IAAIC,EAAOF,EAAMJ,MAAM,KACnBC,EAAc,GACThF,EAAIiF,SAASI,EAAK,GAAGH,QAASlF,GAAKiF,SAASI,EAAK,GAAGH,QAASlF,IACpEgF,EAAY9E,KAAK+E,SAASjF,IAE5B,OAAOgF,EAEP,IAAIA,EAAc,GAElB,OADAA,EAAY9E,KAAK+E,SAASE,EAAMD,SACzBF,GAdFV,E,SAAWI,EAAMY,GACxB,OAAO,IAAI5E,KAAKgE,EAAKa,UAAsB,IAAVD,IAF/BvE,EAAS,GA8BTyE,EAAQ,IAAI9E,KAAK,KAAM,EAAG,IAC1B+E,EAAS,IAAI/E,KAAK,KAAM,EAAG,IAE3BgF,EAAa,GACZrB,E,mDAKL,IAASrE,EAAI,EAAGA,EAAIqE,EAAKpE,OAAQD,IAE/B,IADI2F,EAAS3F,EACJ4F,EAAI,EAAGA,EAAIvB,EAAKrE,GAAGC,OAAQ2F,IAAK,CAiBvC,GAhBIC,EAAMxB,EAAKrE,GAAG4F,IACd9F,EAAU+F,EAAIC,SAASf,MAAM,KAAK,IAC1BK,SAAS,KACnBtF,EAAUA,EAAQiF,MAAM,KAAK,GACpBjF,EAAQsF,SAAS,OAC1BtF,EAAUA,EAAQiF,MAAM,KAAK,IAE/BjF,EAAUA,EAAQmE,QAAQ,cAAe,IACrB,mCAEdnE,KAAW4F,IACfA,EAAW5F,GACTmB,KAAK8E,cAJW,mCAImBjG,IAEnCO,EAAaqF,EAAW5F,GACxBkG,EAAgB,GAChBH,EAAIV,MAAMC,SAAS,MAAQS,EAAIV,MAAMC,SAAS,KAGhD,IADIa,EAAaJ,EAAIV,MAAMJ,MAAM,KACxBmB,EAAI,EAAGA,EAAID,EAAWhG,OAAQiG,IACrCF,EAAgBA,EAAcG,OAAO5B,EAAW0B,EAAWC,UAI1D,GAAIL,EAAIV,MAAMC,SAAS,KAG1B,IADIa,EAAaJ,EAAIV,MAAMJ,MAAM,KACxBmB,EAAI,EAAGA,EAAID,EAAWhG,OAAQiG,IACrCF,EAAgBA,EAAcG,OAAO5B,EAAW0B,EAAWC,UAK7DF,GAHSH,EAAIV,MAAMC,SAAS,KAGZY,EAAcG,OAAO5B,EAAWsB,EAAIV,SAKtD,IAAStB,EAAI,EAAGA,EAAImC,EAAc/F,OAAQ4D,IAAK,CAsB7C,IArBIuC,OADyC,EAEzCJ,EAAcnC,IAAM,IACtBmC,EAAcnC,GAAKmC,EAAcnC,GAAK,GACtCuC,EAAU3B,EAAQgB,EAAkC,GAAxBO,EAAcnC,GAAK,KAE/CuC,EAAU3B,EAAQe,EAAiC,GAAxBQ,EAAcnC,GAAK,IAEhDuC,EAAU3B,EAAQ2B,EAAST,GACvBU,EAAa7B,EAAUqB,EAAI/C,OAC3BA,EAAQwB,EAAW8B,EAAyB,GAAhBC,EAAW,IAC3CvD,EAAQwB,EAAWxB,EAAOuD,EAAW,IACjCC,EAAW9B,EAAUqB,EAAI9C,KACzBA,EAAMuB,EAAW8B,EAAuB,GAAdE,EAAS,IACvCvD,EAAMuB,EAAWvB,EAAKuD,EAAS,IAEhB,oCACXC,EAAaV,EAAI9F,MAAMgF,MAAM,MAClB9E,OAAS,IAAM,GAC5BsG,EAAWC,QAETC,EAAa,GACRzG,EAAI,EAAGA,EAAIuG,EAAWtG,OAAQD,GAAK,EAC1CyG,EAAWvG,KAAK,CACdZ,KAAMiH,EAAWvG,EAAI,GAAGkF,OAAS,IAAMqB,EAAWvG,GAAGkF,OACrDrF,IATW,mCASK0G,EAAWvG,EAAI,GAAGkF,OAAS,IAAMqB,EAAWvG,GAAGkF,SAG/DtF,EAAQ,CACV8G,MAAOb,EAAIzF,KAAO,MAAQC,EAC1BD,KAAMyF,EAAIzF,KACV0C,MAAOA,EACPC,IAAKA,EACL4D,QAAQ,EACRtG,WAAYA,EACZP,QAASA,EACTQ,KAAMuF,EAAIvF,KACVwF,SAAUD,EAAIC,SACd/F,MAAO0G,EACPG,SAAUf,EAAIe,UAGZC,EAAY,CACd/D,MAAOA,EACPC,IAAKA,EACL+D,QAASlH,EAAMQ,KAAO,MAAQC,EAC9B0G,YAAanH,EAAMkG,SACnBxE,SAAU1B,EAAMU,MAElBpB,EAAI8H,YAAYH,GAChB9F,EAAOb,KAAKN,I,OAKlBF,EAAmBR,EAAI+H,Q,kBAChBlG,G,4IAEKlB,GAKZ,IAAIqH,EAAU,IAAIC,eAKlB,OAJAD,EAAQ7F,KAAK,MAFN,8CAEoBxB,GAAK,GAChCqH,EAAQE,OAEEF,EAAQG,aAAatC,MAAM,WAAW,GAAGA,MAAM,UAAU,GAAGG,S,0CAIpDhE,EAAQoG,GAS1B,IAAIC,EAAUC,yJAAsCtG,EAAtC,WAAmDoG,GALrD,uHAOZ,OADA3F,QAAQC,IAAI2F,GACLA,I,6EAEWE,G,uFAENtG,KADZsG,EAAMA,EAAI1C,MAAJ,+CAAyD,I,iDAO/D,IAHA0C,EAAMA,EAAI1C,MAAJ,iDAA2D,GAC7DV,EAAOoD,EAAI1C,MAAM,eACjB2C,EAAW,GACN1H,EAAI,EAAGA,EAAIqE,EAAKpE,OAAQD,IAC3BqE,EAAKrE,GAAGoF,SAAR,+BACFf,EAAKrE,GAAKqE,EAAKrE,GAAG+E,MAAM,YAAY,IAElC4C,EAAS,IAAIC,UACbC,EAAMF,EAAOG,gBAAgBzD,EAAKrE,GAAI,aAC1C0H,EAASxH,KAAKe,KAAK8G,YAAYF,EAAIG,KAAKC,a,yBAGnCP,G,iJAEY,IAAD,OAEZQ,EAAS,IAAIC,gBAAgB/G,OAAOE,SAAS8G,QAC/ClH,EAASgH,EAAOG,IAAI,iBACpBf,EAAQY,EAAOG,IAAI,SAEvB,GADAf,EAAkB,OAAVA,EAAiB,EAAIA,EACxB,WAAWjC,KAAKnE,IAAY,WAAWmE,KAAKnE,GAAjD,CAIAD,KAAKa,SAAS,CAAEhB,SAAS,IAEzB,IAAIoG,EAAU,IAAIC,eAClBD,EAAQ7F,KAAK,MAAOJ,KAAKqH,oBAAoBpH,EAAQoG,IACrDJ,EAAQE,OAERF,EAAQqB,OAAS,WACf,OAAsB,KAAlBrB,EAAQsB,QACVC,MAAM,+BAAD,OAAgCvH,EAAhC,YAA0CoG,SAC/C,EAAKxF,SAAS,CAAEhB,SAAS,KAEE,KAAlBoG,EAAQsB,QACjBC,MAAM,+BACN,EAAK3G,SAAS,CAAEhB,SAAS,UAG3B,EAAK4H,cAAcxB,EAAQG,cAAcsB,MAAK,SAAClH,GAC7C,EAAKmH,eAAenH,GAAGkH,MAAK,SAACE,GAC3B,EAAK/G,SAAS,CAAE,SAAY+G,EAAG/H,SAAS,gBArB5CG,KAAKa,SAAS,CAAEhB,SAAS,Q,GAtTEgI,aChCbC,QACW,cAA7B3H,OAAOE,SAAS0H,UAEe,UAA7B5H,OAAOE,SAAS0H,UAEhB5H,OAAOE,SAAS0H,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBd,MAAK,SAAAe,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLlI,QAAQkI,MAAMA,EAAMC,c","file":"static/js/main.105335eb.chunk.js","sourcesContent":["import React from 'react'\nimport \"./spinner.css\"\nexport default function Spinner() {\n    return (\n        <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\n    )\n}\n","import React, { Component } from 'react'\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\nimport moment from 'moment'\nimport './sass/styles.scss'\nimport './App.css'\nimport Spinner from './spinner/spinner'\nmoment.locale('en', {\n  week: {\n    dow: 1,\n    doy: 1,\n  },\n});\nconst localizer = momentLocalizer(moment)\n\n\nconst ical = require('ical-generator');\nconst cal = ical({ domain: \"github.com/aliveSurfin/react-uod-cal\", name: \"react-uod-cal\", prodId: { company: \"github.com/aliveSurfin\", product: \"react-uod-cal\" } });\nvar filedownloadlink = false\n\nfunction Event({ event }) {\n  let url = \"https://www.dundee.ac.uk/module/\" + event.modcode\n  let staff = []\n  for (let x = 0; x < event.staff.length; x++) {\n    staff.push(<a href={event.staff[x].url}> {event.staff[x].name} </a>)\n  }\n\n  return (\n    <div className=\"event-wrapper\">\n      <div className=\"event-type\">\n        {event.type}\n      </div>\n      <div className=\"event-module\">\n        <a href={url}>{event.modcode} {event.moduleName}</a>\n      </div>\n      <div className=\"event-room\">\n        {event.room === \"&nbsp;\" ? \"n/a\" : event.room}\n      </div>\n      <div className=\"event-staff\">\n        {staff}\n      </div>\n    </div>\n  )\n\n}\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    const minTime = new Date();\n    minTime.setHours(8, 0, 0);\n    const maxTime = new Date();\n    maxTime.setHours(20, 0, 0);\n    this.state = {\n      minTime: minTime,\n      maxTime: maxTime,\n      loading: false,\n      events: [],\n      modules: [],\n\n    }\n\n  }\n  openUrl() {\n    if (this.state.matric === \"\" || this.state.matric === undefined || this.state.matric === null) {\n      return false\n    }\n\n    window.open(window.location.origin + window.location.pathname + \"/?s=\" + this.state.matric, \"_self\")\n  }\n  _HandleInput(e) {\n    if (e.key === 'Enter') {\n      console.log(\"hit\")\n      this.openUrl()\n    }\n  }\n  _HandleChange(e) {\n    console.log(e)\n    this.setState({ matric: e })\n  }\n\n  render() {\n    let components = {\n      agenda: {\n        event: Event\n      }\n    }\n    return (\n      <div id=\"container\">\n        {filedownloadlink && <a className=\"ical-dl\" download=\"cal.ics\" href={filedownloadlink}>Download iCal</a>}\n        {this.state.loading && <Spinner></Spinner>}\n\n        <Calendar\n          components={components}\n          localizer={localizer}\n          events={this.state.calendar == null ? [] : this.state.calendar}\n          startAccessor=\"start\"\n          endAccessor=\"end\"\n          style={this.state.calendar == null ? { display: \"none\" } : { height: 700 }}\n          defaultView={'agenda'}\n          min={this.state.minTime}\n          max={this.state.maxTime}\n          formats={{\n            agendaHeaderFormat: ({ start, end }) => {\n              return (moment.utc(start).format('DD/MM/YYYY') + ' - ' + moment.utc(end).format('DD/MM/YYYY'));\n            }\n          }}\n        />\n        {(this.state.calendar == null && !this.state.loading) &&\n          <div className=\"matric-input\">\n            <form>\n              <label> Enter Matriculation Number </label>\n              <div id='matricContainer'>\n                <input onChange={event => this._HandleChange(event.target.value)}\n                  onKeyDown={evnt => this._HandleInput(evnt)}\n                  name=\"matriculation\"\n                ></input>\n                <select id=\"slash\" name='slash'>\n                  <option value={1}>\n                    /1\n                  </option>\n                  <option value={2}>\n                    /2\n                  </option>\n                </select>\n              </div>\n              <button type=\"submit\">\n                Go\n              </button>\n            </form>\n          </div>\n        }\n\n\n      </div>\n    )\n  }\n  tableToJson(table) {\n    var data = [];\n    if (table.rows[0] == undefined) {\n      return {}\n    }\n    // first row needs to be headers\n    var headers = [];\n    for (let i = 0; i < table.rows[0].cells.length; i++) {\n      headers[i] = table.rows[0].cells[i].innerHTML.toLowerCase().replace(/ /gi, '');\n    }\n\n    // go through cells\n    for (let i = 1; i < table.rows.length; i++) {\n\n      var tableRow = table.rows[i];\n      var rowData = {};\n\n      for (var j = 0; j < tableRow.cells.length; j++) {\n\n        rowData[headers[j]] = tableRow.cells[j].innerHTML;\n\n      }\n\n      data.push(rowData);\n    }\n    return data;\n  }\n\n  async parseTimetable(days) {\n    var events = []\n    function addMinutes(date, minutes) {\n      return new Date(date.getTime() + minutes * 60000);\n    }\n    function parseWeeks(weeks) {\n      if (weeks.includes(\"-\")) {\n        var test = weeks.split(\"-\")\n        var returnArray = []\n        for (let x = parseInt(test[0].trim()); x <= parseInt(test[1].trim()); x++) {\n          returnArray.push(parseInt(x))\n        }\n        return returnArray\n      } else {\n        let returnArray = []\n        returnArray.push(parseInt(weeks.trim()))\n        return returnArray\n      }\n    }\n    function parseTime(time) {\n      var split = time.split(\":\")\n      var returnArray = []\n      returnArray.push(parseInt(split[0].trim()))\n      returnArray.push(parseInt(split[1].trim()))\n      return returnArray\n    }\n    function addDays(date, days) {\n      var result = new Date(date);\n      result.setDate(result.getDate() + days);\n      return result;\n    }\n    var week1 = new Date(2021, 8, 27)\n    var week12 = new Date(2022, 0, 17)\n\n    var moduleDict = {};\n    if (!days) {\n\n      return\n\n    }\n    for (let x = 0; x < days.length; x++) {\n      let dayAdd = x\n      for (let y = 0; y < days[x].length; y++) {\n        var cur = days[x][y]\n        var modcode = cur.activity.split(\" \")[0]\n        if (modcode.includes(\"/\")) {\n          modcode = modcode.split(\"/\")[0]\n        } else if (modcode.includes(\"-\")) {\n          modcode = modcode.split(\"-\")[0]\n        }\n        modcode = modcode.replace(/[^0-9a-z]/gi, '')\n        var moduleBaseURL = \"https://www.dundee.ac.uk/module/\"\n\n        if (!(modcode in moduleDict)) {\n          moduleDict[modcode] =\n            this.getModuleInfo(moduleBaseURL + modcode)\n        }\n        var moduleName = moduleDict[modcode]\n        var weeksForEvent = []\n        if (cur.weeks.includes(\"-\") && cur.weeks.includes(\",\")) {\n          // multiple week spans\n          var weeksSplit = cur.weeks.split(\",\")\n          for (let z = 0; z < weeksSplit.length; z++) {\n            weeksForEvent = weeksForEvent.concat(parseWeeks(weeksSplit[z]))\n          }\n\n        }\n        else if (cur.weeks.includes(\",\")) {\n          // multiple weeks\n          let weeksSplit = cur.weeks.split(\",\")\n          for (let z = 0; z < weeksSplit.length; z++) {\n            weeksForEvent = weeksForEvent.concat(parseWeeks(weeksSplit[z]))\n          }\n        } else if (cur.weeks.includes(\"-\")) {\n          //week span\n\n          weeksForEvent = weeksForEvent.concat(parseWeeks(cur.weeks))\n        } else {\n          weeksForEvent = weeksForEvent.concat(parseWeeks(cur.weeks))\n          //single week\n        }\n        for (let i = 0; i < weeksForEvent.length; i++) {\n          let curDate\n          if (weeksForEvent[i] >= 12) {\n            weeksForEvent[i] = weeksForEvent[i] - 12\n            curDate = addDays(week12, ((weeksForEvent[i] - 1) * 7))\n          } else {\n            curDate = addDays(week1, ((weeksForEvent[i] - 1) * 7))\n          }\n          curDate = addDays(curDate, dayAdd)\n          var startHours = parseTime(cur.start)\n          var start = addMinutes(curDate, startHours[0] * 60)\n          start = addMinutes(start, startHours[1])\n          var endHours = parseTime(cur.end)\n          var end = addMinutes(curDate, endHours[0] * 60)\n          end = addMinutes(end, endHours[1])\n\n          let staffurl = \"https://www.dundee.ac.uk/people/\"\n          let staffsplit = cur.staff.split(\",\")\n          if (staffsplit.length % 2 !== 0) {\n            staffsplit.shift()\n          }\n          let staffarray = []\n          for (let x = 0; x < staffsplit.length; x += 2) {\n            staffarray.push({\n              name: staffsplit[x + 1].trim() + \" \" + staffsplit[x].trim(),\n              url: staffurl + staffsplit[x + 1].trim() + \"-\" + staffsplit[x].trim(),\n            })\n          }\n          var event = {\n            title: cur.type + \" | \" + moduleName,\n            type: cur.type,\n            start: start,\n            end: end,\n            allDay: false,\n            moduleName: moduleName,\n            modcode: modcode,\n            room: cur.room,\n            activity: cur.activity,\n            staff: staffarray,\n            duration: cur.duration,\n          };\n\n          let icalevent = {\n            start: start,\n            end: end,\n            summary: event.type + \" : \" + moduleName,\n            description: event.activity,\n            location: event.room,\n          }\n          cal.createEvent(icalevent)\n          events.push(event)\n        }\n\n      }\n    }\n    filedownloadlink = cal.toURL()\n    return events\n  }\n  getModuleInfo(url) {\n    var cors = \"https://cors-anywhere.herokuapp.com/\"\n    cors = \"https://mysterious-everglades-22580.herokuapp.com/\"\n    cors = \"https://cors-spooky.herokuapp.com/\"\n    cors = \"https://secret-chamber-30285.herokuapp.com/\"\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open(\"GET\", cors + url, false); // false for synchronous request\n    xmlHttp.send();\n    //console.log(xmlHttp.responseText)\n    var raw = xmlHttp.responseText.split(\"<title>\")[1].split(\"module\")[0].trim()\n    return raw\n  }\n\n  createURLFromMatric(matric, slash) {\n    var hostname = 'https://timetable.dundee.ac.uk'\n    var port = '8085'\n    var path = '/reporting/textspreadsheet?objectclass=student+set&idtype=id&identifier='\n    var path2 = \"&t=SWSCUST+student+set+textspreadsheet&days=1-7&weeks=1-52&periods=1-28&template=SWSCUST+student+set+textspreadsheet\"\n    var cors = \"https://cors-anywhere.herokuapp.com/\"\n    cors = \"https://mysterious-everglades-22580.herokuapp.com/\"\n    cors = \"https://cors-spooky.herokuapp.com/\"\n    cors = \"https://secret-chamber-30285.herokuapp.com/\"\n    var fullURL = cors + hostname + ':' + port + path + matric + `/${slash}` + path2\n    console.log(fullURL)\n    return fullURL\n  }\n  async rawHtmlToJSON(raw) {\n    raw = raw.split(`<p><span class='labelone'>Monday</span></p>`)[1]\n    if (raw === undefined) {\n      return\n    }\n    raw = raw.split(`<p><span class='labelone'>Saturday</span></p>`)[0]\n    var days = raw.split('</span></p>')\n    var daysJSON = []\n    for (let x = 0; x < days.length; x++) {\n      if (days[x].includes(`<p><span class='labelone'`)) {\n        days[x] = days[x].split('</table>')[0]\n      }\n      var parser = new DOMParser();\n      var doc = parser.parseFromString(days[x], 'text/html');\n      daysJSON.push(this.tableToJson(doc.body.firstChild))\n\n    }\n    return daysJSON\n  }\n  componentDidMount() {\n\n    const params = new URLSearchParams(window.location.search);\n    let matric = params.get('matriculation')\n    let slash = params.get('slash')\n    slash = slash === null ? 1 : slash\n    if (!/[0-9]{9}/.test(matric) && !/[0-9]{7}/.test(matric)) {\n      this.setState({ loading: false })\n      return\n    }\n    this.setState({ loading: true })\n\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open(\"GET\", this.createURLFromMatric(matric, slash));\n    xmlHttp.send();\n\n    xmlHttp.onload = () => {\n      if (xmlHttp.status == 400) {\n        alert(`Unable to get timetable for ${matric}/${slash}`)\n        this.setState({ loading: false })\n        return\n      } else if (xmlHttp.status == 503) {\n        alert(`Timetable servers down`)\n        this.setState({ loading: false })\n        return\n      }\n      this.rawHtmlToJSON(xmlHttp.responseText).then((e) => {\n        this.parseTimetable(e).then((f) => {\n          this.setState({ \"calendar\": f, loading: false })\n        })\n      })\n    }\n\n\n  }\n\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}