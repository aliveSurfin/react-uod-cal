(this["webpackJsonpreact-uod-cal"]=this["webpackJsonpreact-uod-cal"]||[]).push([[0],{22:function(e,t,n){e.exports=n(32)},27:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(3),l=n.n(r),o=(n(27),n(10)),i=n(14),c=n(15),u=n(21),p=n(20),d=n(11),h=n(19),v=n.n(h),m=(n(31),Object(d.b)(v.a)),f=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={},a}return Object(c.a)(n,[{key:"openUrl",value:function(){void 0!==this.state.matric&&window.open("http://localhost:3000/?s="+this.state.matric,"_self")}},{key:"_HandleInput",value:function(e){"Enter"===e.key&&(console.log("hit"),this.openUrl())}},{key:"_HandleChange",value:function(e){console.log(e),this.setState({matric:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("p",null,null==this.state.calendar?"Enter Matric":""),s.a.createElement(d.a,{localizer:m,events:null==this.state.calendar?[]:this.state.calendar,startAccessor:"start",endAccessor:"end",style:null==this.state.calendar?{display:"none"}:{height:700}}),s.a.createElement("div",{className:"matric-input",style:null!=this.state.calendar?{display:"none"}:{}},s.a.createElement("input",{onChange:function(t){return e._HandleChange(t.target.value)},onKeyDown:function(t){return e._HandleInput(t)}}),s.a.createElement("button",{onClick:function(){return e.openUrl()}},"submit")))}},{key:"tableToJson",value:function(e){for(var t=[],n=[],a=0;a<e.rows[0].cells.length;a++)n[a]=e.rows[0].cells[a].innerHTML.toLowerCase().replace(/ /gi,"");for(a=1;a<e.rows.length;a++){for(var s=e.rows[a],r={},l=0;l<s.cells.length;l++)r[n[l]]=s.cells[l].innerHTML;t.push(r)}return t}},{key:"parseTimetable",value:function(e){console.log(e);var t=[];function n(e,t){return new Date(e.getTime()+6e4*t)}function a(e){if(e.includes("-")){for(var t=e.split("-"),n=[],a=parseInt(t[0].trim());a<=parseInt(t[1].trim());a++)n.push(parseInt(a));return n}return(n=[]).push(parseInt(e.trim())),n}function s(e){var t=e.split(":"),n=[];return n.push(parseInt(t[0].trim())),n.push(parseInt(t[1].trim())),n}function r(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}for(var l=new Date(2020,9,5),i=0;i<e.length;i++)for(var c=i,u=0;u<e[i].length;u++){var p=e[i][u],d=[];if(p.weeks.includes("-")&&p.weeks.includes(","))for(var h=p.weeks.split(","),v=0;v<h.length;v++)d=d.concat(a(h[v]));else if(p.weeks.includes(",")){h=p.weeks.split(",");for(var m=0;m<h.length;m++)d=d.concat(a(h[m]))}else d=(p.weeks.includes("-"),d.concat(a(p.weeks)));for(var f=0;f<d.length;f++){var w,g=r(l,7*(d[f]-1));g=r(g,c);var y=p.activity.includes("AC31008")?"Networks and Data Communications":p.activity.includes("AC31012")?"Information Security":"Database Systems",b=s(p.start),k=n(g,60*b[0]);k=n(k,b[1]);var S=s(p.end),T=n(g,60*S[0]);T=n(T,S[1]);var C=(w={title:p.type+" | "+y+" | "+p.activity.split(" ")[0],start:k,end:T},Object(o.a)(w,"end",T),Object(o.a)(w,"allDay",!1),w);t.push(C)}}return console.log(t),t}},{key:"getTimetable",value:function(e){var t="https://timetable.dundee.ac.uk:8084/reporting/textspreadsheet?objectclass=student+set&idtype=id&identifier="+e+"/1&t=SWSCUST+student+set+textspreadsheet&days=1-7&weeks=13-23&periods=1-28&template=SWSCUST+student+set+textspreadsheet",n=new XMLHttpRequest;n.open("GET","https://secret-chamber-30285.herokuapp.com/"+t,!1),n.send();var a=n.responseText;if(void 0!=(a=a.split("<p><span class='labelone'>Monday</span></p>")[1])){for(var s=(a=a.split("<p><span class='labelone'>Saturday</span></p>")[0]).split("</span></p>"),r=[],l=0;l<s.length;l++){console.log(l+1),s[l].includes("<p><span class='labelone'")&&(s[l]=s[l].split("</table>")[0]);var o=(new DOMParser).parseFromString(s[l],"text/html");r.push(this.tableToJson(o.body.firstChild))}console.log(r);var i=this.parseTimetable(r);this.setState({calendar:i})}}},{key:"componentDidMount",value:function(){console.log(window.location.search),this.getTimetable(window.location.search.split("=")[1])}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.1330bbc6.chunk.js.map