{"version":3,"sources":["spinner/spinner.js","App.js","serviceWorker.js","index.js"],"names":["Spinner","class","moment","locale","week","dow","doy","localizer","momentLocalizer","cal","require","ical","domain","name","prodId","company","product","filedownloadlink","Event","event","url","modcode","staff","x","length","push","href","className","type","moduleName","room","App","props","minTime","Date","setHours","maxTime","state","loading","events","modules","this","matric","undefined","window","open","location","origin","pathname","e","key","console","log","openUrl","setState","components","agenda","id","download","calendar","startAccessor","endAccessor","style","display","height","defaultView","min","max","formats","agendaHeaderFormat","start","end","utc","format","onChange","_HandleChange","target","value","onKeyDown","evnt","_HandleInput","onClick","table","data","rows","headers","i","cells","innerHTML","toLowerCase","replace","tableRow","rowData","j","days","addMinutes","parseWeeks","parseTime","addDays","date","result","setDate","getDate","time","split","returnArray","parseInt","trim","weeks","includes","test","minutes","getTime","week1","week12","moduleDict","dayAdd","y","cur","activity","getModuleInfo","weeksForEvent","weeksSplit","z","concat","curDate","startHours","endHours","staffsplit","shift","staffarray","title","allDay","duration","icalevent","summary","description","createEvent","toURL","xmlHttp","XMLHttpRequest","send","responseText","fullURL","hostname","raw","daysJSON","doc","DOMParser","parseFromString","tableToJson","body","firstChild","temp","parseTimetable","cors","parser","search","createURLFromMatric","onload","rawHtmlToJSON","then","f","Component","Boolean","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.a43997d0.chunk.js","sourcesContent":["import React from 'react'\nimport \"./spinner.css\"\nexport default function Spinner() {\n    return (\n        <div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\n    )\n}\n","import React, { Component } from 'react'\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\nimport moment from 'moment'\nimport './sass/styles.scss'\nimport './App.css'\nimport Spinner from './spinner/spinner'\nmoment.locale('en', {\n  week: {\n    dow: 1,\n    doy: 1,\n  },\n});\nconst localizer = momentLocalizer(moment)\n\n\nconst ical = require('ical-generator');\nconst cal = ical({ domain: \"github.com/aliveSurfin/react-uod-cal\", name: \"react-uod-cal\", prodId: { company: \"github.com/aliveSurfin\", product: \"react-uod-cal\" } });\nvar filedownloadlink = false\n\nfunction Event({ event }) {\n  let url = \"https://www.dundee.ac.uk/module/\" + event.modcode\n  let staff = []\n  for (let x = 0; x < event.staff.length; x++) {\n    staff.push(<a href={event.staff[x].url}> {event.staff[x].name} </a>)\n  }\n\n  return (\n    <div className=\"event-wrapper\">\n      <div className=\"event-type\">\n        {event.type}\n      </div>\n      <div className=\"event-module\">\n        <a href={url}>{event.modcode} {event.moduleName}</a>\n      </div>\n      <div className=\"event-room\">\n        {event.room === \"&nbsp;\" ? \"n/a\" : event.room}\n      </div>\n      <div className=\"event-staff\">\n        {staff}\n      </div>\n    </div>\n  )\n\n}\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    const minTime = new Date();\n    minTime.setHours(8, 0, 0);\n    const maxTime = new Date();\n    maxTime.setHours(20, 0, 0);\n    this.state = {\n      minTime: minTime,\n      maxTime: maxTime,\n      loading: false,\n      events: [],\n      modules: [],\n\n    }\n\n  }\n  openUrl() {\n    if (this.state.matric === \"\" || this.state.matric === undefined || this.state.matric === null) {\n      return false\n    }\n    window.open(window.location.origin + window.location.pathname + \"/?s=\" + this.state.matric, \"_self\")\n  }\n  _HandleInput(e) {\n    if (e.key === 'Enter') {\n      console.log(\"hit\")\n      this.openUrl()\n    }\n  }\n  _HandleChange(e) {\n    console.log(e)\n    this.setState({ matric: e })\n  }\n\n  render() {\n    let components = {\n      agenda: {\n        event: Event\n      }\n    }\n    return (\n      <div id=\"container\">\n        {filedownloadlink && <a className = \"ical-dl\" download=\"cal.ics\" href={filedownloadlink}>Download iCal</a>}\n\n\n\n        {this.state.loading && <Spinner></Spinner>}\n\n        <Calendar\n          components={components}\n          localizer={localizer}\n          events={this.state.calendar == null ? [] : this.state.calendar}\n          startAccessor=\"start\"\n          endAccessor=\"end\"\n          style={this.state.calendar == null ? { display: \"none\" } : { height:  700}}\n          defaultView={'agenda'}\n          min={this.state.minTime}\n          max={this.state.maxTime}\n          formats={{\n            agendaHeaderFormat: ({ start, end }) => {\n              return (moment.utc(start).format('DD/MM/YYYY') + ' - ' + moment.utc(end).format('DD/MM/YYYY'));\n            }\n          }}\n        />\n        {(this.state.calendar == null && !this.state.loading) &&\n          <div className=\"matric-input\">\n            <form>\n              <label> Enter Matriculation Number </label>\n              <input onChange={event => this._HandleChange(event.target.value)}\n                onKeyDown={evnt => this._HandleInput(evnt)}\n                name=\"matriculation\"\n              ></input>\n              <button onClick={() => this.openUrl()} type=\"submit\">\n                Go\n              </button>\n            </form>\n          </div>\n        }\n\n\n      </div>\n    )\n  }\n  tableToJson(table) {\n    var data = [];\n    console.log(table);\n    if (table.rows[0] == undefined) {\n      return {}\n    }\n    // first row needs to be headers\n    var headers = [];\n    for (let i = 0; i < table.rows[0].cells.length; i++) {\n      headers[i] = table.rows[0].cells[i].innerHTML.toLowerCase().replace(/ /gi, '');\n    }\n\n    // go through cells\n    for (let i = 1; i < table.rows.length; i++) {\n\n      var tableRow = table.rows[i];\n      var rowData = {};\n\n      for (var j = 0; j < tableRow.cells.length; j++) {\n\n        rowData[headers[j]] = tableRow.cells[j].innerHTML;\n\n      }\n\n      data.push(rowData);\n    }\n    return data;\n  }\n\n  async parseTimetable(days) {\n    var events = []\n    function addMinutes(date, minutes) {\n      return new Date(date.getTime() + minutes * 60000);\n    }\n    function parseWeeks(weeks) {\n      if (weeks.includes(\"-\")) {\n        var test = weeks.split(\"-\")\n        var returnArray = []\n        for (let x = parseInt(test[0].trim()); x <= parseInt(test[1].trim()); x++) {\n          returnArray.push(parseInt(x))\n        }\n        return returnArray\n      } else {\n        let returnArray = []\n        returnArray.push(parseInt(weeks.trim()))\n        return returnArray\n      }\n    }\n    function parseTime(time) {\n      var split = time.split(\":\")\n      var returnArray = []\n      returnArray.push(parseInt(split[0].trim()))\n      returnArray.push(parseInt(split[1].trim()))\n      return returnArray\n    }\n    function addDays(date, days) {\n      var result = new Date(date);\n      result.setDate(result.getDate() + days);\n      return result;\n    }\n    var week1 = new Date(2021, 8, 27)\n    var week12 = new Date(2021, 0, 18)\n\n    var moduleDict = {};\n\n    for (let x = 0; x < days.length; x++) {\n      let dayAdd = x\n      for (let y = 0; y < days[x].length; y++) {\n        var cur = days[x][y]\n        var modcode = cur.activity.split(\" \")[0]\n        if (modcode.includes(\"/\")) {\n          modcode = modcode.split(\"/\")[0]\n        } else if (modcode.includes(\"-\")) {\n          modcode = modcode.split(\"-\")[0]\n        }\n        modcode = modcode.replace(/[^0-9a-z]/gi, '')\n        var moduleBaseURL = \"https://www.dundee.ac.uk/module/\"\n\n        if (!(modcode in moduleDict)) {\n          moduleDict[modcode] =\n            this.getModuleInfo(moduleBaseURL + modcode)\n        }\n        var moduleName = moduleDict[modcode]\n        var weeksForEvent = []\n        if (cur.weeks.includes(\"-\") && cur.weeks.includes(\",\")) {\n          // multiple week spans\n          var weeksSplit = cur.weeks.split(\",\")\n          for (let z = 0; z < weeksSplit.length; z++) {\n            weeksForEvent = weeksForEvent.concat(parseWeeks(weeksSplit[z]))\n          }\n\n        }\n        else if (cur.weeks.includes(\",\")) {\n          // multiple weeks\n          let weeksSplit = cur.weeks.split(\",\")\n          for (let z = 0; z < weeksSplit.length; z++) {\n            weeksForEvent = weeksForEvent.concat(parseWeeks(weeksSplit[z]))\n          }\n        } else if (cur.weeks.includes(\"-\")) {\n          //week span\n\n          weeksForEvent = weeksForEvent.concat(parseWeeks(cur.weeks))\n        } else {\n          weeksForEvent = weeksForEvent.concat(parseWeeks(cur.weeks))\n          //single week\n        }\n        for (let i = 0; i < weeksForEvent.length; i++) {\n          let curDate\n          if (weeksForEvent[i] >= 12) {\n            weeksForEvent[i] = weeksForEvent[i] - 12\n            curDate = addDays(week12, ((weeksForEvent[i]) * 7))\n          } else {\n            curDate = addDays(week1, ((weeksForEvent[i] - 1) * 7))\n          }\n          curDate = addDays(curDate, dayAdd)\n          var startHours = parseTime(cur.start)\n          var start = addMinutes(curDate, startHours[0] * 60)\n          start = addMinutes(start, startHours[1])\n          var endHours = parseTime(cur.end)\n          var end = addMinutes(curDate, endHours[0] * 60)\n          end = addMinutes(end, endHours[1])\n\n          let staffurl = \"https://www.dundee.ac.uk/people/\"\n          let staffsplit = cur.staff.split(\",\")\n          if (staffsplit.length % 2 !== 0) {\n            staffsplit.shift()\n          }\n          let staffarray = []\n          for (let x = 0; x < staffsplit.length; x += 2) {\n            staffarray.push({\n              name: staffsplit[x + 1].trim() + \" \" + staffsplit[x].trim(),\n              url: staffurl + staffsplit[x + 1].trim() + \"-\" + staffsplit[x].trim(),\n            })\n          }\n          var event = {\n            title: cur.type + \" | \" + moduleName,\n            type: cur.type,\n            start: start,\n            end: end,\n            allDay: false,\n            moduleName: moduleName,\n            modcode: modcode,\n            room: cur.room,\n            activity: cur.activity,\n            staff: staffarray,\n            duration: cur.duration,\n          };\n\n          let icalevent = {\n            start: start,\n            end: end,\n            summary: event.type + \" : \" + moduleName,\n            description: event.activity,\n            location: event.room,\n          }\n          cal.createEvent(icalevent)\n          events.push(event)\n        }\n\n      }\n    }\n    filedownloadlink = cal.toURL()\n    return events\n  }\n  getModuleInfo(url) {\n    var cors = \"https://cors-anywhere.herokuapp.com/\"\n    cors = \"https://mysterious-everglades-22580.herokuapp.com/\"\n    cors = \"https://cors-spooky.herokuapp.com/\"\n    cors = \"https://secret-chamber-30285.herokuapp.com/\"\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open(\"GET\", cors + url, false); // false for synchronous request\n    xmlHttp.send();\n    //console.log(xmlHttp.responseText)\n    var raw = xmlHttp.responseText.split(\"<title>\")[1].split(\"module\")[0].trim()\n    return raw\n  }\n  getTimetable(matric) {\n    if (matric === \"\" || matric === undefined || matric === null) {\n      return\n    }\n    var hostname = 'https://timetable.dundee.ac.uk'\n    var port = '8085'\n    var path = '/reporting/textspreadsheet?objectclass=student+set&idtype=id&identifier='\n    var path2 = \"/1&t=SWSCUST+student+set+textspreadsheet&days=1-7&weeks=1-52&periods=1-28&template=SWSCUST+student+set+textspreadsheet\"\n    var cors = \"https://cors-anywhere.herokuapp.com/\"\n    cors = \"https://mysterious-everglades-22580.herokuapp.com/\"\n    cors = \"https://cors-spooky.herokuapp.com/\"\n    cors = \"https://secret-chamber-30285.herokuapp.com/\"\n    var fullURL = hostname + ':' + port + path + matric + path2\n    //console.log(fullURL);\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open(\"GET\", cors + fullURL, false); // false for synchronous request\n    xmlHttp.send();\n    var raw = xmlHttp.responseText\n    raw = raw.split(`<p><span class='labelone'>Monday</span></p>`)[1]\n    if (raw === undefined) {\n      return\n    }\n    raw = raw.split(`<p><span class='labelone'>Saturday</span></p>`)[0]\n    //console.log(raw)\n    var days = raw.split('</span></p>')\n    var daysJSON = []\n    for (let x = 0; x < days.length; x++) {\n      if (days[x].includes(`<p><span class='labelone'`)) {\n        days[x] = days[x].split('</table>')[0]\n      }\n      var parser = new DOMParser();\n      var doc = parser.parseFromString(days[x], 'text/html');\n      daysJSON.push(this.tableToJson(doc.body.firstChild))\n\n    }\n    //console.log(daysJSON)\n    let temp = this.parseTimetable(daysJSON)\n    this.setState({ \"calendar\": temp })\n\n  }\n\n  getTimetableFromMatric(matric) {\n    if (matric === \"\" || matric === undefined || matric === null) {\n      return\n    }\n\n  }\n  createURLFromMatric(matric) {\n    var hostname = 'https://timetable.dundee.ac.uk'\n    var port = '8085'\n    var path = '/reporting/textspreadsheet?objectclass=student+set&idtype=id&identifier='\n    var path2 = \"/1&t=SWSCUST+student+set+textspreadsheet&days=1-7&weeks=1-52&periods=1-28&template=SWSCUST+student+set+textspreadsheet\"\n    var cors = \"https://cors-anywhere.herokuapp.com/\"\n    cors = \"https://mysterious-everglades-22580.herokuapp.com/\"\n    cors = \"https://cors-spooky.herokuapp.com/\"\n    cors = \"https://secret-chamber-30285.herokuapp.com/\"\n    var fullURL = cors + hostname + ':' + port + path + matric + path2\n    return fullURL\n  }\n  async rawHtmlToJSON(raw) {\n    raw = raw.split(`<p><span class='labelone'>Monday</span></p>`)[1]\n    if (raw === undefined) {\n      return\n    }\n    raw = raw.split(`<p><span class='labelone'>Saturday</span></p>`)[0]\n    var days = raw.split('</span></p>')\n    console.log(days);\n    var daysJSON = []\n    for (let x = 0; x < days.length; x++) {\n      if (days[x].includes(`<p><span class='labelone'`)) {\n        days[x] = days[x].split('</table>')[0]\n      }\n      var parser = new DOMParser();\n      var doc = parser.parseFromString(days[x], 'text/html');\n      daysJSON.push(this.tableToJson(doc.body.firstChild))\n\n    }\n    return daysJSON\n  }\n  componentDidMount() {\n    console.log(window.location.search)\n    //this.getTimetable(window.location.search.split(\"=\")[1])\n    let matric = window.location.search.split(\"=\")[1];\n    if (!/[0-9]{9}/.test(matric)) {\n      this.setState({ loading: false })\n      return\n    }\n    this.setState({ loading: true })\n    //this.getTimetableRawFromMatric(window.location.search.split(\"=\")[1]).then((e)=>{console.log(e);})\n    // fetch(this.createURLFromMatric(matric)).then(res => console.log(res))\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open(\"GET\", this.createURLFromMatric(matric));\n    xmlHttp.send();\n    xmlHttp.onload = () => {\n      this.rawHtmlToJSON(xmlHttp.responseText).then((e) => {\n        this.parseTimetable(e).then((f) => {\n          this.setState({ \"calendar\": f, loading: false })\n        })\n      })\n    }\n\n  }\n\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}