{"version":3,"sources":["App.js","serviceWorker.js","index.js"],"names":["moment","locale","week","dow","doy","localizer","momentLocalizer","cal","require","ical","domain","name","prodId","company","product","filedownloadlink","Event","event","url","modcode","staff","x","length","push","href","className","type","moduleName","room","App","props","minTime","Date","setHours","maxTime","state","undefined","this","matric","window","open","location","origin","pathname","e","key","console","log","openUrl","setState","components","agenda","id","download","calendar","events","startAccessor","endAccessor","style","display","height","defaultView","min","max","formats","agendaHeaderFormat","start","end","utc","format","onChange","_HandleChange","target","value","onKeyDown","evnt","_HandleInput","onClick","table","data","headers","i","rows","cells","innerHTML","toLowerCase","replace","tableRow","rowData","j","days","addMinutes","date","minutes","getTime","parseWeeks","weeks","includes","test","split","returnArray","parseInt","trim","parseTime","time","addDays","result","setDate","getDate","week1","week12","moduleDict","dayAdd","y","cur","activity","getModuleInfo","weeksForEvent","weeksSplit","z","concat","curDate","startHours","endHours","staffsplit","staffarray","title","allDay","duration","icalevent","summary","description","createEvent","toURL","xmlHttp","XMLHttpRequest","send","responseText","fullURL","hostname","raw","daysJSON","doc","DOMParser","parseFromString","tableToJson","body","firstChild","temp","parseTimetable","search","getTimetable","Component","Boolean","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.b3b74608.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\nimport moment from 'moment'\nimport './sass/styles.scss'\nmoment.locale('en', {\n  week: {\n    dow: 1,\n    doy: 1,\n  },\n});\nconst localizer = momentLocalizer(moment)\n\n\nconst ical = require('ical-generator');\nconst cal = ical({ domain: \"github.com/aliveSurfin/react-uod-cal\", name: \"react-uod-cal\", prodId: { company: \"github.com/aliveSurfin\", product: \"react-uod-cal\" } });\nvar filedownloadlink = false\n\nfunction Event({ event }) {\n  let url = \"https://www.dundee.ac.uk/module/\" + event.modcode\n  let staff = []\n  for (let x = 0; x < event.staff.length; x++) {\n    staff.push(<a href={event.staff[x].url}> {event.staff[x].name} </a>)\n  }\n\n  return (\n    <div className=\"event-wrapper\">\n      <div className=\"event-type\">\n        {event.type}\n      </div>\n      <div className=\"event-module\">\n        <a href={url}>{event.modcode} {event.moduleName}</a>\n      </div>\n      <div className=\"event-room\">\n        {event.room === \"&nbsp;\" ? \"n/a\" : event.room}\n      </div>\n      <div className=\"event-staff\">\n        {staff}\n      </div>\n    </div>\n  )\n\n}\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    const minTime = new Date();\n    minTime.setHours(8, 0, 0);\n    const maxTime = new Date();\n    maxTime.setHours(20, 0, 0);\n    this.state = {\n      minTime: minTime,\n      maxTime: maxTime\n    }\n\n  }\n  openUrl() {\n    if (this.state.matric === undefined) {\n      return\n    }\n    window.open(window.location.origin + window.location.pathname + \"/?s=\" + this.state.matric, \"_self\")\n  }\n  _HandleInput(e) {\n    if (e.key === 'Enter') {\n      console.log(\"hit\")\n      this.openUrl()\n    }\n  }\n  _HandleChange(e) {\n    console.log(e)\n    this.setState({ matric: e })\n  }\n\n  render() {\n    let components = {\n      agenda: {\n        event: Event\n      }\n    }\n    return (\n      <div id=\"container\">\n        {filedownloadlink && <a download=\"cal.ics\" href={filedownloadlink}>Download iCal</a>}\n\n\n        <p>{this.state.calendar == null ? \"Enter Matric\" : \"\"}</p>\n\n\n        <Calendar\n          components={components}\n          localizer={localizer}\n          events={this.state.calendar == null ? [] : this.state.calendar}\n          startAccessor=\"start\"\n          endAccessor=\"end\"\n          style={this.state.calendar == null ? { display: \"none\" } : { height: 700 }}\n          defaultView={'agenda'}\n          min={this.state.minTime}\n          max={this.state.maxTime}\n          formats={{\n            agendaHeaderFormat: ({ start, end }) => {\n              return (moment.utc(start).format('DD/MM/YYYY') + ' - ' + moment.utc(end).format('DD/MM/YYYY'));\n            }\n          }}\n        />\n\n        <div className=\"matric-input\" style={this.state.calendar != null ? { display: \"none\" } : {}}>\n          <form>\n            <input onChange={event => this._HandleChange(event.target.value)}\n              onKeyDown={evnt => this._HandleInput(evnt)}\n              name=\"matriculation\"\n            ></input>\n            <button onClick={() => this.openUrl()} type=\"submit\">\n              submit\n        </button>\n          </form>\n        </div>\n\n      </div>\n    )\n  }\n  tableToJson(table) {\n    var data = [];\n\n    // first row needs to be headers\n    var headers = [];\n    for (let i = 0; i < table.rows[0].cells.length; i++) {\n      headers[i] = table.rows[0].cells[i].innerHTML.toLowerCase().replace(/ /gi, '');\n    }\n\n    // go through cells\n    for (let i = 1; i < table.rows.length; i++) {\n\n      var tableRow = table.rows[i];\n      var rowData = {};\n\n      for (var j = 0; j < tableRow.cells.length; j++) {\n\n        rowData[headers[j]] = tableRow.cells[j].innerHTML;\n\n      }\n\n      data.push(rowData);\n    }\n\n    return data;\n  }\n\n  parseTimetable(days) {\n    var events = []\n    function addMinutes(date, minutes) {\n      return new Date(date.getTime() + minutes * 60000);\n    }\n    function parseWeeks(weeks) {\n      if (weeks.includes(\"-\")) {\n        var test = weeks.split(\"-\")\n        var returnArray = []\n        for (let x = parseInt(test[0].trim()); x <= parseInt(test[1].trim()); x++) {\n          returnArray.push(parseInt(x))\n        }\n        return returnArray\n      } else {\n        let returnArray = []\n        returnArray.push(parseInt(weeks.trim()))\n        return returnArray\n      }\n    }\n    function parseTime(time) {\n      var split = time.split(\":\")\n      var returnArray = []\n      returnArray.push(parseInt(split[0].trim()))\n      returnArray.push(parseInt(split[1].trim()))\n      return returnArray\n    }\n    function addDays(date, days) {\n      var result = new Date(date);\n      result.setDate(result.getDate() + days);\n      return result;\n    }\n    var week1 = new Date(2020, 9, 5)\n    var week12 = new Date(2021, 0, 18)\n    \n    var moduleDict = {};\n\n    for (let x = 0; x < days.length; x++) {\n      let dayAdd = x\n      for (let y = 0; y < days[x].length; y++) {\n        var cur = days[x][y]\n        var modcode = cur.activity.split(\" \")[0]\n        if (modcode.includes(\"/\")) {\n          modcode = modcode.split(\"/\")[0]\n        } else if (modcode.includes(\"-\")) {\n          modcode = modcode.split(\"-\")[0]\n        }\n        modcode = modcode.replace(/[^0-9a-z]/gi, '')\n        var moduleBaseURL = \"https://www.dundee.ac.uk/module/\"\n\n        if (!(modcode in moduleDict)) {\n          moduleDict[modcode] =\n            this.getModuleInfo(moduleBaseURL + modcode)\n        }\n        var moduleName = moduleDict[modcode]\n        var weeksForEvent = []\n        if (cur.weeks.includes(\"-\") && cur.weeks.includes(\",\")) {\n          // multiple week spans\n          var weeksSplit = cur.weeks.split(\",\")\n          for (let z = 0; z < weeksSplit.length; z++) {\n            weeksForEvent = weeksForEvent.concat(parseWeeks(weeksSplit[z]))\n          }\n\n        }\n        else if (cur.weeks.includes(\",\")) {\n          // multiple weeks\n          let weeksSplit = cur.weeks.split(\",\")\n          for (let z = 0; z < weeksSplit.length; z++) {\n            weeksForEvent = weeksForEvent.concat(parseWeeks(weeksSplit[z]))\n          }\n        } else if (cur.weeks.includes(\"-\")) {\n          //week span\n\n          weeksForEvent = weeksForEvent.concat(parseWeeks(cur.weeks))\n        } else {\n          weeksForEvent = weeksForEvent.concat(parseWeeks(cur.weeks))\n          //single week\n        }\n        for (let i = 0; i < weeksForEvent.length; i++) {\n          let curDate\n          if (weeksForEvent[i] >= 12) {\n            weeksForEvent[i] = weeksForEvent[i] - 12\n            curDate = addDays(week12, ((weeksForEvent[i]) * 7))\n          } else {\n            curDate = addDays(week1, ((weeksForEvent[i] - 1) * 7))\n          }\n          curDate = addDays(curDate, dayAdd)\n          var startHours = parseTime(cur.start)\n          var start = addMinutes(curDate, startHours[0] * 60)\n          start = addMinutes(start, startHours[1])\n          var endHours = parseTime(cur.end)\n          var end = addMinutes(curDate, endHours[0] * 60)\n          end = addMinutes(end, endHours[1])\n\n          let staffurl = \"https://www.dundee.ac.uk/people/\"\n          let staffsplit = cur.staff.split(\",\")\n          let staffarray = []\n          for (let x = 0; x < staffsplit.length; x += 2) {\n            staffarray.push({\n              name: staffsplit[x + 1].trim() + \" \" + staffsplit[x].trim(),\n              url: staffurl + staffsplit[x + 1].trim() + \"-\" + staffsplit[x].trim(),\n            })\n          }\n          var event = {\n            title: cur.type + \" | \" + moduleName,\n            type: cur.type,\n            start: start,\n            end: end,\n            allDay: false,\n            moduleName: moduleName,\n            modcode: modcode,\n            room: cur.room,\n            activity: cur.activity,\n            staff: staffarray,\n            duration: cur.duration,\n          };\n\n          let icalevent = {\n            start: start,\n            end: end,\n            summary: event.type + \" : \" + moduleName,\n            description: event.activity,\n            location: event.room,\n          }\n          cal.createEvent(icalevent)\n          events.push(event)\n        }\n\n      }\n    }\n    //console.log(events)\n    filedownloadlink = cal.toURL()\n    return events\n  }\n  getModuleInfo(url) {\n    var cors = \"https://cors-anywhere.herokuapp.com/\"\n    cors = \"https://mysterious-everglades-22580.herokuapp.com/\"\n    cors = \"https://cors-spooky.herokuapp.com/\"\n    cors = \"https://secret-chamber-30285.herokuapp.com/\"\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open(\"GET\", cors + url, false); // false for synchronous request\n    xmlHttp.send();\n    //console.log(xmlHttp.responseText)\n    var raw = xmlHttp.responseText.split(\"<title>\")[1].split(\"module\")[0].trim()\n    return raw\n  }\n  getTimetable(matric) {\n    if (matric === \"\" || matric === undefined || matric === null) {\n      return\n    }\n    var hostname = 'https://timetable.dundee.ac.uk'\n    var port = '8084'\n    var path = '/reporting/textspreadsheet?objectclass=student+set&idtype=id&identifier='\n    var path2 = \"/1&t=SWSCUST+student+set+textspreadsheet&days=1-7&weeks=1-52&periods=1-28&template=SWSCUST+student+set+textspreadsheet\"\n    var cors = \"https://cors-anywhere.herokuapp.com/\"\n    cors = \"https://mysterious-everglades-22580.herokuapp.com/\"\n    cors = \"https://cors-spooky.herokuapp.com/\"\n    cors = \"https://secret-chamber-30285.herokuapp.com/\"\n    var fullURL = hostname + ':' + port + path + matric + path2\n    //console.log(fullURL);\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.open(\"GET\", cors + fullURL, false); // false for synchronous request\n    xmlHttp.send();\n    var raw = xmlHttp.responseText\n    raw = raw.split(`<p><span class='labelone'>Monday</span></p>`)[1]\n    if (raw === undefined) {\n      return\n    }\n    raw = raw.split(`<p><span class='labelone'>Saturday</span></p>`)[0]\n    //console.log(raw)\n    var days = raw.split('</span></p>')\n    var daysJSON = []\n    for (let x = 0; x < days.length; x++) {\n      if (days[x].includes(`<p><span class='labelone'`)) {\n        days[x] = days[x].split('</table>')[0]\n      }\n      var parser = new DOMParser();\n      var doc = parser.parseFromString(days[x], 'text/html');\n      daysJSON.push(this.tableToJson(doc.body.firstChild))\n\n    }\n    //console.log(daysJSON)\n    let temp = this.parseTimetable(daysJSON)\n    this.setState({ \"calendar\": temp })\n\n  }\n  componentDidMount() {\n    console.log(window.location.search)\n    this.getTimetable(window.location.search.split(\"=\")[1])\n  }\n\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}